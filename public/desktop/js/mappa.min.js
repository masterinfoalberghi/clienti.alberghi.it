function mapInit(e){map=new google.maps.Map(document.getElementById("map"),e);var n=[{featureType:"poi.business",stylers:[{visibility:"off"}]}];map.setOptions({styles:n})}function putMarkers(e,n){var a="/images/markers/red.png",o="/images/markers/red.png",s="/images/markers/blue.png";$.each(e,function(e,i){var t=i.lat,r=i.lon,p=i.img,l=i.nam,m=i.rat,g=i.adr,d=i.cnt,c=i.web,u=i.lnk,w=i.prm,f=i.prM,k=i.pri,b=new google.maps.LatLng(t,r),h="<div>";h+='<img src="'+p+'" style="width:100%;"/>',h+='<div class="infowindow_container_content">',h+='<h3 style="display:inline-block;">'+l+'</h3><span class="rating" style="font-size:12px;">'+m+"</span>",h+="<p>"+g+"</p>",d&&(h+="<small>"+d+"</small><br />"),d&&(c+="<small>"+c+"</small><br /><br />"),w&&f?(h+='<p class="prices">',h+='<small class="label">'+dizionario.prm+'</small><span class="price">'+w+"</span>&nbsp;&nbsp;&nbsp;",h+='<small class="label">'+dizionario.prM+'</small><span class="price">'+f+"</span>",h+="</p>"):k&&(h+='<p class="prices">',h+='<small class="label">'+dizionario.pri+'</small><span class="price">'+k+" &euro;</span>",h+="</p>"),h+='<a target="_top" href="'+u+'" class="btn right btn-verde">'+dizionario.link+"</a>",h+="</div>",h+="</div>";var _=new google.maps.Marker({position:b,map:map,icon:a,oldImage:o,newImage:s});google.maps.event.addListener(_,"click",function(){$("#infowindow_container").html(h).show(),$("#closeinfowindow_container").show(),$.each(_markers,function(e,n){var a=this.oldImage;this.setIcon(a)});var e=_.newImage;_.setIcon(e),_.setZIndex(google.maps.Marker.MAX_ZINDEX+1)}),_markers.push(_),n.extend(_.getPosition())}),map.fitBounds(n)}function putMarkersPoi(e,n,a){e.each(function(){var e=$(this),o=e.data("lat"),s=e.data("lon"),i=new google.maps.LatLng(o,s),t=e.data("title"),r=e.data("dis"),p=new google.maps.InfoWindow({content:"<b>"+t+"</b><br />"+r}),l=new google.maps.Marker({position:i,map:map,icon:n});l.addListener("click",function(){p.open(map,l)}),_markers.push(l),a&&bounds.extend(l.getPosition())}),a&&map.fitBounds(bounds)}function showSteps(e,n,a){var o=e.routes[0].legs[0],s=(e.routes[0].legs[0].duration,o.steps.length),i="/images/markers/red.png",t=new google.maps.Marker({position:o.steps[0].start_point,map:map,icon:i}),r=new google.maps.InfoWindow({content:n});t.addListener("click",function(){r.open(map,t)}),_markers.push(t),i="/images/markers/blue.png";var p=new google.maps.Marker({position:o.steps[s-1].end_point,map:map,icon:i}),l=new google.maps.InfoWindow({content:a});p.addListener("click",function(){l.open(map,p)}),_markers.push(p)}function calculateAndDisplayRoute(e,n,a,o,s,i,t,r,p){for(var l=0;l<_markers.length;l++)_markers[l].setMap(null);Math.abs(a)<=3?_travelMode="WALKING":_travelMode="DRIVING",n.route({origin:o+", "+s,destination:i+", "+t,travelMode:_travelMode},function(n,a){"OK"===a&&(e.setDirections(n),showSteps(n,r,p))})}var map,bounds,_markers=[],console=console?console:{log:function(){}};$(function(){$("#closeinfowindow_container").click(function(e){e.preventDefault(),$(this).hide(),$("#infowindow_container").hide()})}),window.initializeStradario=function(e,n,a){var o={center:new google.maps.LatLng(__lat,__lon),zoom:15,scrollwheel:!1,gestureHandling:"greedy",mapTypeId:google.maps.MapTypeId.ROADMAP};mapInit(o),bounds=new google.maps.LatLngBounds,putMarkers(a,bounds)},window.initializeHotel=function(e,n){var a={center:new google.maps.LatLng(__lat,__lon),zoom:15,scrollwheel:!1,gestureHandling:"greedy",mapTypeId:google.maps.MapTypeId.ROADMAP};mapInit(a),bounds=new google.maps.LatLngBounds;var o,s=(new google.maps.InfoWindow,"/images/markers/red.png"),i=new google.maps.LatLng(e,n),t="<b>"+$("h1").parent().html()+"</b>",o=new google.maps.Marker({position:i,map:map,icon:s}),r=new google.maps.InfoWindow({content:t});o.addListener("click",function(){r.open(map,o)}),bounds.extend(o.getPosition()),_markers.push(o),s="/images/markers/dot-red.png",putMarkersPoi($(".marker_poi"),s,!1);var p=new google.maps.DirectionsService,l=new google.maps.DirectionsRenderer({map:map,suppressMarkers:!0});$(".marker_poi").click(function(a){a.preventDefault();var o=$(this),s="<b>"+o.data("title")+"</b><br />"+o.data("dis");calculateAndDisplayRoute(l,p,o.data("dis"),e,n,o.data("lat"),o.data("lon"),t,s)})},window.initializeListing=function(e,n,a){var o={center:new google.maps.LatLng(e,n),zoom:13,scrollwheel:!1,gestureHandling:"greedy",mapTypeId:google.maps.MapTypeId.ROADMAP};mapInit(o),bounds=new google.maps.LatLngBounds,putMarkers(a,bounds)};